#!/usr/bin/python3

import sys
import os
from zipfile import ZipFile
from pyminizip import uncompress

if len(sys.argv) < 2:
	print("Usage: %s <zip name>" % sys.argv[0]);
	exit()
else:
	zip_name = sys.argv[1]

next_zip = ""
while next_zip != "flag.zip":
	zip_f = ZipFile(zip_name)
	next_zip = zip_f.namelist()[0]
	password = next_zip.split(".")[0]
	uncompress(zip_name, password, ".", 0)
	os.remove(zip_name)
	zip_name = next_zip
