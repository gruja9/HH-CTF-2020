(function(){var d=window.sv,c=d.ObjectUtil,e=d.Log,f=window.$svjq,b=window._sv,a=function(b){return(b=(new RegExp("[\\?&]"+b+"=([^&#]*)")).exec(window.location.href))?b[1]:null},h=function(b,g,a){var c;c="string"===f.type(b)?f(b):b;f.get(g,function(g){c.fadeOut("fast",function(){c.html(g);c.fadeIn();f.isFunction(a)&&a.call(this)})})},l={};d.PortletUtil={getModelObjectUri:function(b,g,a){b="/modelobjectapi/1/"+d.PageContext.pageId+"/"+b+"/"+g;a&&(b+="/"+a);return b},getEditApiUri:function(b){var g=
b.modelHandler,a=b.objectId,c=b.operationObjectId,e=b.contextNodeId||d.PageContext.pageId;"string"===typeof b&&(g=b);a||(a=d.PageContext.pageId);b="/edit-api/1/"+e+"/"+a+"/"+g;c&&(b+="/"+c);return b},getPortletUri:function(b,g){return"/"+d.PageContext.pageId+"/"+b+".xml?state="+g},getPortletResourceUri:function(b,g){var c=a("identity"),e=a("group"),f=a("tag");return"/portletresource/"+d.PageContext.pageId+"/"+b+"?state="+g+(c?"&identity="+c:"")+(e?"&group="+e:"")+(f?"&tag="+f:"")},reloadPortletsByType:function(b,
g){var a=f(b);f.each(a,function(){var b=f(this),a=b.attr("id"),a=c.getObjectId(a);h(b,"/"+d.PageContext.pageId+"/"+a+".xml"+(g||""))})},doGetWithFade:h,doGet:function(b,g){f.get(g,function(g){f(b).html(g)})},getTemplate:function(a,g){var c=a.attr("id"),d;if(c){c=c.replace(".","_");if(!l[c+g]){d=a.find("script.sv-tmpl-"+g);if(0===d.length){e.warn("portletUtil","Could not find template with name "+g+" for portlet "+c);return}l[c+g]=b.template(d.html())}return l[c+g]}e.warn("portletUtil","Tried to get template from invalid element")},
parseRequestParameters:a}})();(function(){var d=window.$svjq;d("body").on("click",'a[rel*="external"]',function(){var c=d(this);c.is(".sv-editing-mode .sv-text-portlet-content *")||c.attr("href")&&c.attr("target","_blank")})})();
(function(){var d=window.sv,c=d.Events,e=d.PortletUtil,f=d.Ajax,b=d.TemplateUtil,a=[{name:"Dreambroker",scheme:/dreambroker.com\/channel\/.+/,callback:function(a,c){f.doGet({url:e.getModelObjectUri(d.PageContext.pageId,"embed"),data:{url:a,provider:"dreambroker"}}).done(function(a){a&&a.html&&c(b.template('<div class="sv-oembed-container"><div class="sv-iframeEmbed-16_9"><%= html %></div></div>',{html:a.html}))})}},{name:"Instagram",scheme:/instagr\.?am(\.com)?\/.+/,callback:function(a,c){f.doGet({url:"https://api.instagram.com/oembed",
data:{url:a}}).done(function(a){a&&a.html&&c(b.template('<div class="sv-oembed-container"><%= html %></div>',{html:a.html}))})}},{name:"Youtube",scheme:/^(https?:\/\/)?(www.)?(youtube.com|youtu.?be)\/.+$/,callback:function(a,c){var g=a.match(/.*(?:v\=|be\/|embed\/)([\w\-]+)&?.*/);g&&0<g.length&&c(b.template('<div class="sv-oembed-container"><div class="sv-iframeEmbed-16_9"><%= html %></div></div>',{html:'<iframe src="https://www.youtube.com/embed/'+g[1]+'" allowfullscreen="true" frameborder="0"></iframe>'}))}},
{name:"Youtube no cookie",scheme:/^(https?:\/\/)?(www.)?(youtube-nocookie.com)\/.+$/,callback:function(a,c){var g=a.match(/.*(?:v\=|be\/|embed\/)([\w\-]+)&?.*/);g&&0<g.length&&c(b.template('<div class="sv-oembed-container"><div class="sv-iframeEmbed-16_9"><%= html %></div></div>',{html:'<iframe src="https://www.youtube-nocookie.com/embed/'+g[1]+'" allowfullscreen="true" frameborder="0"></iframe>'}))}},{name:"Vimeo",scheme:/vimeo.com\/.*/,callback:function(a,c){f.doGet({url:"https://vimeo.com/api/oembed.json",
data:{url:a}}).done(function(a){a&&a.html&&c(b.template('<div class="sv-oembed-container"><div class="sv-iframeEmbed-16_9"><%= html %></div></div>',{html:a.html}))})}},{name:"Wistia",scheme:/https?:\/\/(.+)?(wistia.com|wi.st)\/.*/,callback:function(a,c){f.doGet({url:"https://fast.wistia.com/oembed",data:{url:a}}).done(function(a){a&&a.html&&c(b.template('<div class="sv-oembed-container"><div class="sv-iframeEmbed-16_9"><%= html %></div></div>',{html:a.html}))})}},{name:"Screen9",scheme:/screen9.com\/.+|screen9.tv\/.+/,
callback:function(a,c){f.doGet({url:"https://api.screen9.com/oembed",data:{url:a}}).done(function(a){a&&a.html&&c(b.template('<div class="sv-oembed-container"><div class="sv-iframeEmbed-16_9"><%= html %></div></div>',{html:a.html}))})}},{name:"Soundcloud",scheme:/soundcloud.com\/.+|snd.sc\/.+/,callback:function(a,c){f.doGet({url:"https://soundcloud.com/oembed",data:{url:a}}).done(function(a){a&&a.html&&c(b.template('<div class="sv-oembed-container"><div class="sv-iframeEmbed-16_9"><%= html %></div></div>',
{html:a.html}))})}},{name:"Spotify",scheme:/open.spotify.com\/.+/,callback:function(a,c){f.doGet({url:e.getModelObjectUri(d.PageContext.pageId,"embed"),data:{url:a,provider:"spotify"}}).done(function(a){a&&a.html&&c(b.template('<div class="sv-oembed-container"><div class="sv-iframeEmbed-16_9"><%= html %></div></div>',{html:a.html}))})}}],h=function(a,b){return a?function(a){b.find(".sv-embed").first().replaceWith(a)}:function(a){b.find(".sv-message-content > .sv-embed").parent().first().after(a)}};
c.on(c.types.updateOembedLinks,function(b,c){if(b&&b.length){var g=b.find(".sv-embed").first();if(g.length&&(g=g.attr("href")))for(var e=0;e<a.length;e++){var d=a[e];if(d.scheme.test(g)){d.callback(g,h(c&&c.replace,b));break}}}})})();
(function(){var d=window.$svjq;d("[data-portlet-lazy-load]").each(function(){var c=d(this),e=c.data("portlet-id"),f=c.data("portlet-url"),b=c.data("portlet-reload"),a=window.sv;a.PortletUtil.doGetWithFade("#"+e,f);b&&(c=c.data("portlet-timeout"),setInterval(function(){a.PortletUtil.doGet("#"+e,f)},c))})})();
(function(){var d=window.$svjq,c=window._sv,e=window.moment,f=window.sv.Events,b=d("html").attr("lang")||"en";e&&e.locale(b);var a=function(a,c){try{return"d"===c?"sv"===b||"no"===b?"i g\u00e5r":"fi"===b?"eilen":"yesterday":e().subtract(a,"milliseconds").format("D MMM")}catch(d){return""}},h={sv_short:{future:"alldeles nyss",past:"%s",s:"alldeles nyss",m:"1 min",mm:" min",h:"1 tim",hh:" tim",d:a,dd:a,M:a,MM:a,y:"1 \u00e5r",yy:" \u00e5r"},sv:{future:"alldeles nyss",past:"f\u00f6r %s sedan",s:"n\u00e5gra sekunder",
m:"en minut",mm:" minuter",h:"en timme",hh:" timmar",d:"en dag",dd:" dagar",M:"en m\u00e5nad",MM:" m\u00e5nader",y:"ett \u00e5r",yy:" \u00e5r"},no_short:{future:"akkurat n\u00e5",past:"%s",s:"akkurat n\u00e5",m:"1 min",mm:" min",h:"1 tim",hh:" tim",d:a,dd:a,M:a,MM:a,y:"1 \u00e5r",yy:" \u00e5r"},no:{future:"akkurat n\u00e5",past:"for %s siden",s:"akkurat n\u00e5",m:"ett minutt",mm:" minutter",h:"en time",hh:" timer",d:"en dag",dd:" dager",M:"en m\u00e5ned",MM:" m\u00e5neder",y:"ett \u00e5r",yy:" \u00e5r"},
en_short:{future:"just now",past:"%s",s:"just now",m:"1 mins",mm:" mins",h:"1 hr",hh:" hrs",d:a,dd:a,M:a,MM:a,y:"a year",yy:" years"},en:{future:"just now",past:"%s ago",s:"a few seconds",m:"a minute",mm:" minutes",h:"an hour",hh:" hours",d:"a day",dd:" days",M:"a month",MM:" months",y:"a year",yy:" years"},fi_short:{future:"ihan \u00e4sken",past:" %s",s:"ihan \u00e4sken",m:"1 min",mm:" min",h:"1 tunti",hh:" tuntia",d:a,dd:a,M:a,MM:a,y:"1 vuosi",yy:" vuotta"},fi:{future:"ihan \u00e4sken",past:"%s sitten",
s:"ihan \u00e4sken",m:"yksi minuutti",mm:" minuuttia",h:"yksi tunti",hh:" tuntia",d:"yksi p\u00e4iv\u00e4",dd:" p\u00e4iv\u00e4\u00e4",M:"yksi kuukausi",MM:" kuukautta",y:"yksi vuosi",yy:" vuotta"}},l=function(a,b){var e=Math.round(Date.now()-a.getTime());if(0>=e)return b.future;var d=c.find([{threshold:46656E6,modifier:31536E6,render:function(a,c){return b.past.replace(/%s/,c+b.yy)}},{threshold:27648E6,render:function(){return b.past.replace(/%s/,b.y)}},{threshold:3888E6,modifier:2592E6,render:function(a,
e){return c.isFunction(b.MM)?b.MM(a):b.past.replace(/%s/,e+b.MM)}},{threshold:22464E5,render:function(a){return c.isFunction(b.M)?b.M(a):b.past.replace(/%s/,b.M)}},{threshold:1296E5,modifier:864E5,render:function(a,e){return c.isFunction(b.dd)?b.dd(a):b.past.replace(/%s/,e+b.dd)}},{threshold:792E5,render:function(){return c.isFunction(b.d)?b.d(e,"d"):b.past.replace(/%s/,b.d)}},{threshold:54E5,modifier:36E5,render:function(a,c){return b.past.replace(/%s/,c+b.hh)}},{threshold:27E5,render:function(){return b.past.replace(/%s/,
b.h)}},{threshold:9E4,modifier:6E4,render:function(a,c){return b.past.replace(/%s/,c+b.mm)}},{threshold:46E3,render:function(){return b.past.replace(/%s/,b.m)}},{threshold:0,render:function(){return b.past.replace(/%s/,b.s)}}],function(a){return e>=a.threshold}),f=d.render,d=d.modifier;return f(Math.round(e),d?Math.round(e/d):void 0)},a=function(a){a=a||d("body");a.find("time[data-fn-relative-date]").each(function(){var a=d(this),c=a.attr("datetime");if(c){var f=a.data("short");a.text(l(new Date(c),
h[f?b+"_short":b]||h[f?"en_short":"en"]));a.attr("title",e(c).format("LLLL"))}})};window.setInterval(a,6E4);f.on(f.types.updateRelativeDates,a);a()})();
(function(){var d=window.sv,c=window.$svjq,e=d.Events,f=window.LazyLoad,b=window._sv,a,h=function(c){if(a)c.call();else{var e=b.isEmpty(d.PageContext.userLocale)?"en":d.PageContext.userLocale,e=e.substring(0,2),e=-1!==b.indexOf(l,e)?e:"en";f.css("/sitevision/ajax/jquery/plugins/videojs/video-js.min.css");f.js(["/sitevision/ajax/jquery/plugins/videojs/video.min.js","/sitevision/ajax/jquery/plugins/videojs/lang/"+e+".js"],function(){a=!0;c.call()})}};e.on(e.types.updateVideoLinks,function(a){if(a&&
a.is("video:not(.sv-video-js-loaded)"))h(function(){var b=window.videojs(a[0]);c(b.tag).addClass("sv-video-js-loaded")});else{var b=(a||c(".sv-timeline-portlet, .sv-video-portlet, .sv-timelineentry-portlet, .sv-file-video-preview")).find("video:not(.sv-video-js-loaded)");b.length&&h(function(){b.each(function(){var a=window.videojs(this);c(a.tag).addClass("sv-video-js-loaded")})})}});var l="ar ba bg ca cs cy da de el en es fa fi fr gl he hr hu it ja ko nb nl nn oc pl ru sk sr sv tr uk vi".split(" ")})();
(function(){window.sv.WindowLocationUtil={setHashValue:function(d,c){window.location.hash="#"+d+"/"+c},getHashValue:function(d){var c=window.location.hash,e=2+d.length;if(0===c.indexOf("#"+d+"/")&&c.length>e)return c.substring(e)},clearHashValue:function(){window.location.hash=""},hasHashValue:function(){var d=window.location.hash;return 0===d.indexOf("#")&&1<d.indexOf("/")},reloadPage:function(){location.reload()}}})();
(function(){var d=window.$svjq,c=window.sv.i18n,e=window.sv,f=e.PortletUtil,b=e.Ajax;d(".sv-archive-portlet").on("click",".sv-create-article-entry",function(){var a=d(this),e=a.data("archive-id"),l=a.data("template-id"),a=a.parent(),k=d("<div>").addClass("sv-loading-icon").text(c.getText("portlet.archive.archive","creatingArticle"));a.empty().append(k);b.doPost({url:f.getEditApiUri({objectId:e,contextNodeId:e,modelHandler:"article"}),data:{template:l,portletType:"archive"},success:function(a){window.location.href=
"/edit/"+a.nodeId}});return!1})})();
(function(){var d=window.$svjq,c=window.sv.i18n,e=window.sv,f=e.PortletUtil,b=e.Ajax;d(".sv-blog-portlet").on("click",".sv-create-blog-entry",function(){var a=d(this),e=a.data("archive-id"),l=a.data("template-id"),a=a.parent(),k=d("<div>").addClass("sv-loading-icon").text(c.getText("portlet.blog.blog","creatingBlogEntry"));a.empty().append(k);b.doPost({url:f.getEditApiUri({objectId:e,contextNodeId:e,modelHandler:"article"}),data:{template:l,portletType:"blog"},success:function(a){window.location.href=
"/edit/"+a.nodeId}});return!1})})();
(function(){function d(a){var d=a.find("[data-comments2-entry]");c(a);if(0!==d.length){var m=b.getObjectId(a.attr("id")),g=d.data("js-namespace"),h=d.data("profilepageurl"),d=d.data("tagresultpageurl"),s=new z(e[g].comments||[],{id:m,portletId:m});u=e[g].maxCharacterCount;y=e[g].useCaptcha;new D({el:a,collection:s,commentTemplate:f.getTemplate(a,"comments2-comment"),portletId:m,profilePageURL:h,tagResultPageURL:d,$list:a.find("[data-fn-comments2]")});m=a.find(".sv-comments2-comments");0<m.length&&
(r(m,h),v(m,d));h="localStorage"in window&&null!==window.localStorage?window.localStorage.getItem("sv-comments2-full-name"):void 0;h&&0<h.length&&a.find("[data-fn-comments2-input-name]").val(h);a.find(".sv-comment-hidden").attr("title",n("hiddenComment"))}}function c(a){var c=b.getObjectId(a.attr("id"));a.off("click","[data-fn-comment2-toggle-close]");a.on("click","[data-fn-comment2-toggle-close]",function(b){b.preventDefault();b=f.getPortletUri(c,"toggleVisible");k.get(b,function(b){a.find(".sv-comments2-portlet-content").html(b);
d(a)})});a.off("click","[data-fn-comment2-toggle-mutable]");a.on("click","[data-fn-comment2-toggle-mutable]",function(b){b.preventDefault();b=f.getPortletUri(c,"toggleMutable");k.get(b,function(){a.find("[data-sv-comments2-closed-title]").hasClass("sv-hidden")?(a.find("[data-sv-comments2-closed-title]").removeClass("sv-hidden"),a.find(".sv-comments2-form").addClass("sv-hidden"),a.find("[data-sv-comments2-disallow-comments]").addClass("sv-hidden"),a.find("[data-sv-comments2-allow-comments]").removeClass("sv-hidden")):
(a.find("[data-sv-comments2-closed-title]").addClass("sv-hidden"),a.find(".sv-comments2-form").removeClass("sv-hidden"),a.find("[data-sv-comments2-disallow-comments]").removeClass("sv-hidden"),a.find("[data-sv-comments2-allow-comments]").addClass("sv-hidden"))})})}if(window.SVBackbone){var e=window.sv,f=e.PortletUtil,b=e.ObjectUtil,a=e.Events,h=e.KeyUtil,l=h.KEY,k=window.$svjq,g=e.Ajax,m=window.SVBackbone,q=window._sv,p={},u,y,x={triggers:{"@":{source:f.getModelObjectUri(e.PageContext.pageId,"userIdentitySearch",
e.PageContext.pageId),searchKey:"term",allowWhiteSpace:!0,maxWhiteSpace:2,parse:function(a){return a.hits}}},minLength:2,replacer:function(a){return a.trigger+'{"value":"'+a.name+'","id":"'+a.id+'"}'}},n=function(a,b){var c;if(!b&&p[a])return p[a];c=e.i18n.getText("portlet.comments2.comments",a,b);b||(p[a]=c);return c},r=function(a,b){a.find("a[data-user-identity]").each(function(){var a=k(this);a.attr("href",b+"?identity="+a.data("user-identity"))})},v=function(a,b){a.find("a[data-social-tag-id]").each(function(){var a=
k(this);a.attr("href",b+"?tag="+encodeURIComponent(a.data("social-tag-name")))})},t=m.Model.extend({url:function(){return this.collection?this.collection.url()+"&commentId="+this.get("id"):"?commentId="+this.get("id")}}),z=m.Collection.extend({model:t,initialize:function(a,b){this.options=b;e.PageContext.userIdentityId&&this.bindServerEvents()},bindServerEvents:function(){var b=this;a.on("server-pagecomment-added-"+e.PageContext.pageId,function(a){b.add(a.content,{append:!0})})},url:function(){return f.getPortletResourceUri(this.options.portletId,
"comment")+"&file="+this.options.id}}),s=t.extend({url:function(){return this.collection?f.getPortletResourceUri(this.collection.portletId,"subComment")+"&commentId="+this.collection.id+"&subCommentId="+this.get("id"):"?subCommentId="+this.get("id")}}),F=m.Collection.extend({model:s,initialize:function(a,b){this.id=b.id;this.portletId=b.portletId;this.pageCommentId=b.pageCommentId},url:function(){return f.getPortletResourceUri(this.portletId,"subComments")+"&commentId="+this.pageCommentId},parse:function(a){this.isAllowedToComment=
a.isAllowedToComment;this.trigger("updateCommentArea",this.isAllowedToComment);return a}}),G=m.View.extend({tagName:"li",className:function(){return this.model.get("hidden")?"sv-comment2-comment sv-comment-hidden":"sv-comment2-comment"},events:function(){return this.model.get("isSubComment")?{"click [data-fn-destroy-subcomment]":"showDestroyDialog","click [data-fn-edit-subcomment]":"editComment","click [data-fn-hide-subcomment]":"doHide","click [data-fn-show-subcomment]":"doHide"}:{"click [data-fn-destroy-comment]":"showDestroyDialog",
"click [data-fn-edit-comment]":"editComment","click [data-fn-hide-comment]":"doHide","click [data-fn-show-comment]":"doHide","click [data-fn-show-comments]":"handleShowCommentsClick","click [data-fn-expand-subcomments]":"handleShowCommentsClick","click [data-fn-shrink-subcomments]":"handleHideCommentsClick"}},initialize:function(){this.listenTo(this.model,"change:comment",this.updateComment,this);this.listenTo(this.model,"destroy",this.remove,this);this.listenTo(this.model,"change:hidden",this.hide,
this)},showDestroyDialog:function(){var a=this,b=this.model.get("isSubComment")?n("removeReplyTitle"):n("removeCommentTitle"),c=this.model.get("isSubComment")?n("removeReplyBody"):n("removeCommentBody");e.DialogUtil.showConfirmDialog(b,c,function(b){b&&a.model.destroy({wait:!0})});return!1},editComment:function(a){a.preventDefault();g.doGet({context:this,url:this.model.url()}).done(function(a){this.showEditComment(a.plainMessage,a.mentions)});return!1},showEditComment:function(a,b){var c=this,d=k("<div/>"),
f=k('<span class="sv-float-right">'+(u-a.length)+"</span>"),m=k("<textarea/>").attr("id","editComment").addClass("sv-comment-input sv-border-box").on("keyup",q.bind(function(a){a=u-a.currentTarget.value.length;0>a?(f.addClass("sv-character-limit-exceeded"),this.getSaveEditCommentButton().addClass("disabled").attr("disabled","disabled")):(f.removeClass("sv-character-limit-exceeded"),this.getSaveEditCommentButton().removeClass("disabled").prop("disabled",!1));f.text(a)},this)).val(a);d.addClass("sv-comments2-portlet").append(m).append(f);
var h=[{text:n("save"),callback:k.proxy(function(){g.doPut({url:c.model.url(),data:{comment:m.triggeredInput("getRichContent")},context:this}).done(function(a){this.model.set(a)})},this)}];e.DialogUtil.showDialog({title:this.model.get("isSubComment")?n("editReplyTitle"):n("editCommentTitle"),body:d,buttons:h,shownCallback:function(){m.triggeredInput(x).triggeredInput("setIds",b).elastic()}});return!1},getSaveEditCommentButton:function(){this.$saveEditButton||(this.$saveEditButton=k(".modal-footer button"));
return this.$saveEditButton},updateComment:function(b){b.get("hidden")&&!b.get("isAdmin")?b.collection.remove(b):(this.render(),a.trigger(a.types.updateLikables,this.$el),a.trigger(a.types.updateRelativeDates,this.$el))},doHide:function(a){a.preventDefault();this.model.set({hidden:!this.model.get("hidden")});this.model.save({},{url:f.getPortletResourceUri(this.options.portletId,"toggleVisibleComment")+"&commentId="+this.model.id})},updateCommentsCount:function(a){switch(a){case 0:a=n("doReply");break;
case 1:a=a+" "+n("reply");break;default:a=a+" "+n("replies")}this.$el.find("[data-fn-subcomment-counter]").text(a)},handleShowCommentsClick:function(a){a.preventDefault();this.doShowComments()},handleHideCommentsClick:function(a){a.preventDefault();a=this.$el.find("[data-comments2-subcomment-container]");var b=this.$el.find("[data-fn-expand-subcomments]"),c=this.$el.find("[data-fn-shrink-subcomments]");a.fadeOut("fast");c.hide();b.show()},doShowComments:function(){var a=this.model.get("id"),b=this.$el.find("[data-comments2-subcomment-container]"),
c=this.$el.find("[data-fn-expand-subcomments]"),d=this.$el.find("[data-fn-shrink-subcomments]"),m=this;this.subComments?(b.fadeIn("fast"),d.show(),c.hide()):(this.subComments=new F([],{id:this.model.id,portletId:this.options.portletId,pageCommentId:a}),this.subCommentsView=new D({el:b,collection:this.subComments,commentTemplate:f.getTemplate(k("#"+e.ObjectUtil.getHtmlId(this.options.portletId)),"comments2-subcomment"),portletId:this.options.portletId,profilePageURL:this.options.profilePageURL,tagResultPageURL:this.options.tagResultPageURL,
$list:b.find("[data-comments2-subcomments]")}),this.listenTo(this.subComments,"add destroy",function(){m.updateCommentsCount.call(m,m.subComments.length)}),this.subComments.fetch({success:function(a){m.subCommentsView.render();m.updateCommentsCount(a.length);b.fadeIn("fast",function(){b.find("textarea").triggerHandler("focus")});d.show();c.hide()}}))},hide:function(){if(this.model.get("hidden")){var a=this.model.get("isSubComment")?"hiddenReply":"hiddenComment";this.$el.addClass("sv-comment-hidden");
this.$el.attr("title",n(a));this.$el.find("[data-fn-hide-comment]").addClass("sv-hidden");this.$el.find("[data-fn-show-comment]").removeClass("sv-hidden");this.$el.find("[data-fn-hide-subcomment]").addClass("sv-hidden");this.$el.find("[data-fn-show-subcomment]").removeClass("sv-hidden");this.$el.find(".sv-comments2-hidden-comment-text").removeClass("sv-hidden")}else this.$el.removeClass("sv-comment-hidden"),this.$el.removeAttr("title"),this.$el.find("[data-fn-hide-comment]").removeClass("sv-hidden"),
this.$el.find("[data-fn-show-comment]").addClass("sv-hidden"),this.$el.find("[data-fn-hide-subcomment]").removeClass("sv-hidden"),this.$el.find("[data-fn-show-subcomment]").addClass("sv-hidden"),this.$el.find(".sv-comments2-hidden-comment-text").addClass("sv-hidden")},render:function(){this.$el.html(this.options.template(this.model.toJSON()));if(this.model.toJSON().hidden){var a=this.model.get("isSubComment")?"hiddenReply":"hiddenComment";this.$el.attr("title",n(a))}r(this.$el,this.options.profilePageURL);
v(this.$el,this.options.tagResultPageURL);this.model.id===f.parseRequestParameters("pagecomment")&&this.doShowComments();return this}}),D=m.View.extend({initialize:function(){this.$list=this.options.$list;this.collection.on("add",this.addNewComment,this);this.collection.on("remove",this.removeComment,this);this.$el.find("[data-fn-comments2-input]").triggeredInput(x).elastic();0<this.collection.length&&this.render()},render:function(){this.clearList();this.collection.each(function(a){this.appendOne(a)},
this);a.trigger(a.types.updateRelativeDates,this.$el);a.trigger(a.types.updateLikables,this.$el);if(window.onloadCallback&&this.collection.id)window.onloadCallback(this.$el.find("[data-sv-recaptcha]").attr("id"))},clearList:function(){this.$list.empty()},appendOne:function(a){a=(new G({model:a,portletId:this.options.portletId,template:this.options.commentTemplate,profilePageURL:this.options.profilePageURL,tagResultPageURL:this.options.tagResultPageURL})).render().$el;var b=a.find(".sv-comments2-content").find(".sv-truncate-more"),
c;0<b.length&&(this.addShowMoreLink(b),c=!0);this.$list.append(a);c&&this.bindShowMoreEvents(a)},bindShowMoreEvents:function(a){var b=n("showMore"),c=n("showLess"),e=k(".sv-truncate-more-link",a),d=k(".sv-truncate-more",a),f=k(".sv-truncate-ellipsis",a);e.on("click",function(a){a.preventDefault();e.text()===b?(d.show(),e.text(c),f.css("display","none")):(d.hide(),e.text(b),f.css("display","inline"))})},addShowMoreLink:function(a){k('<span class="sv-truncate-ellipsis">...</span>').insertBefore(a);
k('<div><a href="#" class="sv-truncate-more-link">'+n("showMore")+"</a></div>").insertAfter(a);a.css("display","none")},addNewComment:function(b){void 0!==b.toJSON().author?this.appendOne(b):a.trigger(a.types.notifyUser,{type:"default",heading:n("moderatedHeading"),message:n("moderatedBody"),transient:!0});a.trigger(a.types.updateRelativeDates,this.$el);a.trigger(a.types.updateLikables,this.$el)},removeComment:function(b){this.render();b.get("hidden")&&a.trigger(a.types.notifyUser,{type:"default",
heading:n("moderatedHeading"),message:n("moderatedBody"),transient:!0})},getLoader:function(){this.$loader||(this.$loader=k('<img src="/sitevision/util/images/loading_16_grey.gif" />').css("vertical-align","middle").appendTo(this.$el.find("[data-fn-comment-input]").parent()));return this.$loader},events:{"focus [data-fn-comments2-input]":"expandTextfield","click [data-fn-comments2-input]":"expandTextfield","keyup [data-fn-comments2-input]":"countdownCharactersLeft","keyup [data-fn-comments2-input-name]":"countdownCharactersLeft",
"keydown [data-fn-comments2-input]":"checkKeyDown","submit [data-fn-comments2-form]":"postComment"},expandTextfield:function(a){var b=k(a.currentTarget);b.addClass("sv-message-input-expanded");this.getInputControls(b).show();this.countdownCharactersLeft(a)},shrinkTextfield:function(a){a.removeClass("sv-message-input-expanded");this.getInputControls(a).hide()},getTextField:function(a){return a.find("[data-fn-comments2-input]")},getInputControls:function(a){return a.closest("form").find(".sv-submit-controls")},
countdownCharactersLeft:function(a){a=k(a.currentTarget);var b=a.val(),b=u-b.length,c=a.parent().find("[data-fn-comments2-input-size]"),e=a.closest("form");0>b?c.addClass("sv-character-limit-exceeded"):c.removeClass("sv-character-limit-exceeded");c.text(b);""!==a.val()&&0<=b&&!this.activeConnection?this.enableSubmitButton(e):this.disableSubmitButton(e)},checkKeyDown:function(a){if(h.getKeyCodeFromEvent(a)===l.RETURN&&a.ctrlKey)return this.getSubmitButton(k(a.target).closest("form")).trigger("focus"),
this.$el.find("[data-fn-comments2-form]").trigger("submit"),!1},postComment:function(b){var c=this,e,d,f,m,g;if(!b.isPropagationStopped()&&!b.isDefaultPrevented()){b.preventDefault();if(this.activeConnection)return!1;f=k(b.target);e=this.getTextField(f);g=c.getNameField(f);f=e.val().length;if(1===g.length&&0===g.val().length)return a.trigger(a.types.notifyUser,{type:"default",heading:n("noNameHeading"),message:n("noNameBody"),transient:!0}),!1;if(0<f&&f<=u){if(y&&(d=this.$el.find("#g-recaptcha-response"),
d.length||(d=this.$el.find(".g-recaptcha-response")),d=d&&d[0].value,!d))return this.$el.find(".sv-help-block-verify").show(),!1;this.disableSubmitButton(k(b.target));this.activeConnection=!0;d=this.collection.id?new s({comment:e.triggeredInput("getRichContent"),fullName:g.val(),useCaptcha:y,recaptchaResponse:d||""}):new t({comment:e.triggeredInput("getRichContent"),fullName:g.val(),useCaptcha:y,recaptchaResponse:d||""});f=c.$el.find("[data-sv-spam-marker]");0<f.length&&(d.attributes[f.attr("name")]=
f.val());m=setTimeout(function(){c.getLoader().show()},400);this.collection.create(d,{wait:!0,success:function(){e.val("");c.activeConnection=!1;c.getLoader().hide();clearTimeout(m);var a=g.val();a&&"localStorage"in window&&null!==window.localStorage&&window.localStorage.setItem("sv-comments2-full-name",a);y&&(c.collection.id?c.$el.find("[data-sv-recaptcha-container]").hide():c.$el.find("#recaptcha-container").hide())},error:function(){c.activeConnection=!1;c.getLoader().hide();clearTimeout(m);c.enableSubmitButton(k(b.target));
a.trigger(a.types.notifyUser,{type:"error",heading:n("postFailedHeading"),message:n("postFailedBody"),transient:!0})}});this.shrinkTextfield(e)}else f>u&&a.trigger(a.types.notifyUser,{type:"default",heading:n("commentToLongHeading"),message:n("commentToLongBody"),transient:!0});return!1}},getSubmitButton:function(a){return a.find("[data-fn-comments2-submit]")},getNameField:function(a){return a.find("[data-fn-comments2-input-name]")},disableSubmitButton:function(a){this.getSubmitButton(a).addClass("disabled").attr("disabled",
"disabled")},nameFieldOK:function(a){a=this.getNameField(a);return 0===a.length||a.val()?!0:!1},enableSubmitButton:function(a){""!==this.getTextField(a).val()&&this.nameFieldOK(a)&&this.getSubmitButton(a).removeClass("disabled").prop("disabled",!1)}});k(".sv-comments2-portlet").each(function(){var a=k(this);d(a)})}})();
(function(){function d(b){this.options=b;this.bindLinkListener()}var c=window.$svjq,e=window.sv,f=/^[A-Z0-9._%+\-]+@([A-Z0-9][.\-]?)+[A-Z0-9]+\.[A-Z]{2,6}$/i;d.prototype={bindLinkListener:function(){var b=this;this.options.$portlet.find("."+this.options.linkClass).on("click",function(){b.openDialog.call(b,this);return!1})},getDialogContainer:function(){this.$dialogContainer||(this.$dialogContainer=c("<div/>"));return this.$dialogContainer},showMessageDialog:function(b){this.$subDialogContainer?this.$subDialogContainer.html(b).svDialog("open"):
this.$subDialogContainer=c("<div/>").html(b).svDialog({open:!0,title:this.options.sendMessageTitle,buttons:[{text:this.options.closeButtonText,type:"primary",callback:c.proxy(function(){this.$subDialogContainer.svDialog("close")},this)}]})},validateForm:function(){var b=!0,a=this.getDialogContainer().find("form");c.each(this.options.requiredFields,c.proxy(function(c,e){var d=a.find("[name="+e+"]");this.validateField(d)||(b=!1)},this));if(this.options.attachmentField){var e=a.find("[name=attachment]");
this.checkAttachmentSize(e)||(b=!1)}return b},validateField:function(b){var a=b.is("[name=emailAddress]"),c=b.is("[name=attachment]");if(this.checkRequiredField(b)){if(a&&!this.checkEmailAddress(b))return this.appendErrorMessage(b,this.options.errorMessages.invalidEmail),!1;if(c&&!this.checkAttachmentSize(b))return this.appendErrorMessage(b,this.options.errorMessages.fileSizeExceeded),!1;this.removeValidationErrors(b);return!0}this.appendErrorMessage(b,this.options.errorMessages[b.attr("name")]);
return!1},checkEmailAddress:function(b){if(0===b.length)return!0;b=b.val();return""===c.trim(b)&&-1===c.inArray("emailAddress",this.options.requiredFields)||f.test(b)},checkAttachmentSize:function(b){return 0===b[0].files.length?!0:b[0].files[0].size<this.options.maxMailSize},checkRequiredField:function(b){var a=!1;return-1===c.inArray(b.attr("name"),this.options.requiredFields)?!0:a=b.is("[type=checkbox]")?b.is(":checked")||0<b.siblings("input[type=checkbox]").filter(":checked").length:!!c.trim(b.val())},
appendErrorMessage:function(b,a){b.siblings(".sv-contact2-error-message-container").remove();b.addClass("sv-contact2-warned");var e=c("<label/>",{"for":b.attr("id"),"class":this.options.errorFont}).html('<img alt="" style="border:none; width:16px; height:16px; vertical-align:middle" src="'+this.options.errorImageSrc+'"/> '+a);c('<div class="sv-contact2-error-message-container" />').append(e).appendTo(b.parent())},removeValidationErrors:function(b){(b?b.parent():this.getDialogContainer()).find(".sv-contact2-error-message-container").remove()},
handleSubmit:function(){var b=this.options.ajaxFormUrl,a;this.validateForm()&&(this.options.attachmentField?this.getDialogContainer().find("form").trigger("submit"):(a=this.getDialogContainer().find("form").serialize(),c.post(b,a,c.proxy(function(a){this.closeDialog();this.showMessageDialog(a)},this))))},closeDialog:function(){this.getDialogContainer().svDialog("close")},buildDialogUrl:function(b){return this.options.ajaxSendBaseUrl+"&contactUserId="+b.substring(3).replace("_",".")},openDialog:function(b){var a=
this.getDialogContainer(),e=a.find(".sv-form-consent");if(this.dialogCreated)a.svDialog("setURL",this.buildDialogUrl(b.id)).svDialog("open"),e.length&&a.svDialog("disableSubmitButton");else{a.svDialog({open:!0,url:this.buildDialogUrl(b.id),title:this.options.sendMessageTitle,modal:this.options.useModalDialog,buttons:[{text:this.options.submitButtonText,type:"primary",callback:c.proxy(this.handleSubmit,this)},{text:this.options.cancelButtonText,type:"link",callback:c.proxy(this.closeDialog,this)}]});
var d=this;a.on("change","input, textarea",function(){d.validateField(c(this))});a.on("change","input[data-sv-form-consent-checkbox]",function(){c(this).is(":checked")?a.svDialog("enableSubmitButton"):a.svDialog("disableSubmitButton")});a.on("open:dialog.sv-dialog",function(){a.find(".sv-form-consent").length&&a.svDialog("disableSubmitButton")});a.on("keyup","input[type=text].sv-contact2-warned, textarea.sv-contact2-warned",function(){d.validateField(c(this))});this.dialogCreated=!0}}};c(".sv-contact2-portlet").each(function(){var b=
c(this),a=e.contact2&&e.contact2[this.id.substring(4)];a&&(a.$portlet=b,a=new d(a),b.data("sv-contact2-portlet",a))})})();
(function(){var d=window.$svjq,c={};d(".sv-has-error").each(function(){var c=d(this);c.on("change keyup",function(){c.removeClass("sv-has-error");c.off()})});var e=function(e){var b=e.val();e=c[e.attr("id")];b=e.initialSize-d.trim(b).length;0>b?e.$el.addClass("sv-textfield-limit-exceeded"):e.$el.removeClass("sv-textfield-limit-exceeded");e.$el.text(b)};d(".sv-form-textfield.sv-limit-characters").each(function(){var f=d(this),b=f.parent().find(".sv-textfield-input-size"),a=f.attr("id");c[a]={$el:b,
initialSize:b.text()};f.on("keyup",function(a){e(d(a.currentTarget))});f.val().length&&e(f)});d("form[data-sv-single-click]").one("submit",function(){d(this).find("input[type=submit]").prop("disabled",!0)});d("form[data-sv-user-consent]").each(function(){var c=d(this),b=c.find("input[type=submit]:not(.sv-survey-next)");b.length&&(c=c.find("[data-sv-form-consent-checkbox]"),b.prop("disabled",!c.is(":checked")),c.on("change",function(){b.prop("disabled",!d(this).is(":checked"))}))})})();
(function(){function d(b){b.fancybox({hideOnContentClick:!0,helpers:{title:null},transitionIn:"elastic",transitionOut:"elastic",padding:0,overlayOpacity:.6})}var c=window.$svjq,e=c("a.sv-resizable-img"),f=c("img.sv-lazy-load-img");e.length&&(c.fn.fancybox?d(e):(c=window.sv.PageContext,window.LazyLoad.js("/sitevision/"+c.versionPath+"/js/jquery.fancybox"+(c.dev?".js":"-min.js"),function(){d(e)})));f.length&&window.svyall&&window.svyall({lazyClass:"sv-lazy-load-img"})})();
(function(){function d(b,a,e,d,f,g){var m=window.hs,q=c.i18n.getLanguage();if("de"===q||"no"===q||"sv"===q)m.lang=m.lang[q];m.numberingClass=b;b={interval:a,repeat:!0,useControls:!f,fixedControls:"fit"};f||(b.overlayOptions={position:"bottom right",hideOnMouseOut:d,offsetY:e,offsetX:-3});g||(b.thumbstrip={position:"above",mode:"horizontal",relativeTo:"expander"});m.addSlideshow(b)}var c=window.sv,e=window.$svjq,f=window.LazyLoad;c.ImageAlbumUtil={createSlideShow:function(b,a,c,l,k,g){window.hs?d(b,
a,c,l,k,g):(f.css("/sitevision/ajax/highslide/highslide.css"),e.getScript("/sitevision/ajax/highslide/highslide_mod.js",function(){d(b,a,c,l,k,g)}))}}})();
(function(){var d=window.$svjq;d(".sv-login-form").each(function(){var c=d(this).find("form"),e=c.find("[name=name]"),f=c.find("[name=pwd]"),b=c.find(".sv-login-error-message");b.length?b.trigger("focus"):c.hasClass("sv-login-name-focus")&&e.trigger("focus");c.hasClass("sv-login-autocomplete-off")?c.attr("autocomplete","off"):(e.attr("autocomplete","username"),f.attr("autocomplete","current-password"))})})();
(function(){var d=window.$svjq;d(".sv-rating-portlet").each(function(){var c=d(this);c.find(".sv-rating-voted input").rating();c.find(".sv-rating-voted input").rating("disable");c.find(".sv-rating-labelcontainer").css("display","none");c.find(".sv-rating-submit").css("display","none");c.find(".sv-star-container input[type=radio]").rating({callback:function(){var c=d(this).parents("form"),f=c.serialize(),b=c.data("ajax-posturl");d.post(b,f,function(a){var b=c.closest(".sv-rating-portlet");c.remove();
b.append(a)})}});c.find(".sv-thumb-rating input").on("click keypress",function(c){c.preventDefault();c=d(this);var f=c.closest("form");c=c.data("value")?c.data("value"):c.attr("value");c=f.serialize()+"&ratingValue="+c;var b=f.data("ajax-posturl");d.post(b,c,function(a){var b=f.closest(".sv-rating-portlet");f.remove();b.append(a)})})})})();
(function(d,c){d.sv=d.sv||{};d.sv.responsiveTables=d.sv.responsiveTables||{};d.sv.responsiveTables.config=d.sv.responsiveTables.config||{};d.sv.responsiveTables.classNames={};d.sv.responsiveTables.selectors={};c.each([["groupName",""],["scroll","--scroll"],["fixedFirst","--fixedFirst"],["stackGroupName","--stacked"],["stackTable","--stackTable"],["stackColumns","--stackColumns"]],function(c,f){d.sv.responsiveTables.classNames[f[0]]="sv-responsiveTable"+f[1];d.sv.responsiveTables.selectors[f[0]]=".sv-responsiveTable"+
f[1]});d.sv.responsiveTables.config=c.extend({},{breakpoint:"767px",fixedFirstWidth:"35%",divClassTmpl:'<div class="<%= classNames %>" />',divStyleTmpl:'<div class="<%= classNames %>" style="<%= styleAttr %>" />',tblTmpl:'<table class="<%= classNames %>"><tbody></tbody></table>',tblThRowTmpl:'<tr class="<%= trClassNames %>"><th class="<%= thClassNames %>" colspan="<%= colSpan %>"><%= content %></th></tr>',tblTrRowTmpl:'<tr class="<%= trClassNames %>"><td class="<%= groupName %>__key"><%= keyContent %></td><td class="<%= groupName %>__value <%= cellClassName %>"><%= valueContent %></td></tr>'},
d.sv.responsiveTables.config)})(window,window.$svjq);
(function(d,c,e,f,b,a){var h=f.classNames,l=f.selectors,k=f.config;(function(){e.svRespTables||(e.svRespTables={});e.svRespTables.scroll=function(a){this.init=function(){e(a).removeClass(h.groupName).wrap(b(k.divClassTmpl,{classNames:h.groupName}))};this.init()};e.fn.svRespTables_scroll=function(){return this.each(function(){new e.svRespTables.scroll(this)})};e.svRespTables.fixedFirst=function(c){var d=this,q=h.groupName+" "+h.fixedFirst,p=f.mql,u=!1;d.$el=e(c);d.$el.data("svRespTables.fixedFirst",
d);d.init=function(){d.$el.removeClass(q).wrap(b(k.divClassTmpl,{classNames:q}))};d.splitTable=function(){d.$copy=d.$el.clone();d.$copy.css("width","100%").find("td:not(:first-child), th:not(:first-child)").hide().end().find("caption").html("&nbsp;");d.$el.closest(".sv-responsiveTable--fixedFirst").append(d.$copy);d.$copy.wrap(b(k.divStyleTmpl,{classNames:h.fixedFirst+"__pinned",styleAttr:"width: "+k.fixedFirstWidth}));d.$el.wrap(b(k.divStyleTmpl,{classNames:h.fixedFirst+"__scrollable",styleAttr:"margin-left: "+
k.fixedFirstWidth}));d.setCellHeights()};d.unSplitTable=function(){d.$el.closest(l.fixedFirst).find(l.fixedFirst+"__pinned").remove();d.$el.unwrap();d.$copy=a;d.unSetCellHeights()};d.setCellHeights=function(){var a=d.$el.find("tr"),b=d.$copy.find("tr"),c=[];a.each(function(a,b){e(b).find("th, td").each(function(){var b=e(this).outerHeight(!0);c[a]=c[a]||0;b>c[a]&&(c[a]=b)})});b.each(function(b,d){e(d).height(c[b]);a.eq(b).height(c[b])})};d.unSetCellHeights=function(){d.$el.find("tr").each(function(a,
b){b.style.height="auto"})};d.updateTables=function(){!p.matches&&u?(u=!1,d.unSplitTable()):p.matches&&!u&&(u=!0,d.splitTable())};p.addListener(d.updateTables);e(d.updateTables);d.init()};e.fn.svRespTables_fixedFirst=function(){return this.each(function(){new e.svRespTables.fixedFirst(this)})};e.svRespTables.stackTable=function(a){var c=this,d=f.mql;c.$el=e(a);c.$el.data("svRespTables.stackTable",c);c.init=function(){var a="",f,g;d.removeListener(c.init);c.$copy=e(b(k.tblTmpl,{classNames:c.$el.prop("class")+
" "+h.stackGroupName+"__smallOnly"}));c.$el.addClass(h.stackGroupName+"__largeOnly");f=c.$el.find("caption").clone();g=c.$el.find("tr").eq(0);c.$el.find("tr").each(function(c,d){var f=e(d),m="",l="",q,s=f.prop("class");0===c?a+=b(k.tblThRowTmpl,{trClassNames:s,thClassNames:h.stackGroupName+"__headRow "+h.stackGroupName+"__headRow--main",colSpan:2,content:f.find("th, td").eq(0).html()}):(f.find("td, th").each(function(a,c){var d=e(c);e.trim(d.html())&&(0===a?m+=b(k.tblThRowTmpl,{trClassNames:s,thClassNames:h.stackGroupName+
"__headRow",colSpan:2,content:d.html()}):(q=e.trim(g.find("td,th").eq(a).html()),l+=b(k.tblTrRowTmpl,{trClassNames:s,groupName:h.stackGroupName,keyContent:q?q:"",cellClassName:d.prop("class"),valueContent:d.html()})))}),a+=m+l)});c.$copy.find("tbody").before(f).html(a);c.$el.before(c.$copy)};d.matches?c.init():d.addListener(c.init)};e.fn.svRespTables_stackTable=function(){return this.each(function(){new e.svRespTables.stackTable(this)})};e.svRespTables.stackColumns=function(a){var c=this,d=f.mql;
c.$el=e(a);c.$el.data("svRespTables.stackColumns",c);c.init=function(){function a(b,c){var d=e(c),f=e("<tr></tr>"),k,s,p;0===b&&f.addClass(h.stackGroupName+"__headRow "+h.stackGroupName+"__headRow--main");k=d.find("td, th").eq(0).clone().addClass(h.stackGroupName+"__key");s=g;d.find("*[colspan]").length&&(p=0,d.find("td, th").each(function(a,b){var c=e(b).attr("colspan");if(p>g)return!1;c?(c=parseInt(c,10),s-=c-1,p+c>g&&(s+=p+c-g-1),p+=c):p++}));d=d.find("td, th").eq(s).clone();d.addClass(h.stackGroupName+
"__value").removeAttr("colspan");f.append(k,d);l.append(f)}var f=c.$el.find("tr").eq(0).find("td, th").length,g=1,l;d.removeListener(c.init);if(!(3>f)){c.$copy=e(b(k.tblTmpl,{classNames:c.$el.prop("class")+" "+h.stackGroupName+"__smallOnly"}));c.$el.addClass(h.stackGroupName+"__largeOnly");c.$el.find("caption").length&&c.$copy.find("tbody").before(c.$el.find("caption").clone());for(l=e("<tbody />");g<f;)c.$el.find("tr").each(a),++g;c.$copy.find("tbody").append(l.html());c.$el.before(c.$copy)}};d.matches?
c.init():d.addListener(c.init)};e.fn.svRespTables_stackColumns=function(){return this.each(function(){new e.svRespTables.stackColumns(this)})}})()})(window,window.document,window.$svjq,window.sv.responsiveTables,window.sv.TemplateUtil.template);
(function(d,c,e,f,b){var a,h=b.selectors;b.init=function(){var a=e(c.getElementsByTagName("table")).filter(h.groupName);0<a.length&&(b.appendCSS(),a.filter(h.scroll).svRespTables_scroll().end().filter(h.fixedFirst).svRespTables_fixedFirst().end().filter(h.stackTable).svRespTables_stackTable().end().filter(h.stackColumns).svRespTables_stackColumns())};e(function(){a=e(c.body);d.matchMedia&&a.hasClass("sv-responsive")&&!a.hasClass("sv-editing-mode")&&(b.mql=window.matchMedia("(max-width: "+b.config.breakpoint+
")"),b.init())})})(window,window.document,window.$svjq,window.sv,window.sv.responsiveTables);
(function(d,c){var e,f;function b(a){var b=document.createElement("style");b.appendChild(document.createTextNode(""));document.head.appendChild(b);a&&b.setAttribute("media","(max-width: "+a+")");return b.sheet}e=["div.sv-responsiveTable { overflow: auto; max-width: 100%; }","div.sv-responsiveTable * { white-space: nowrap !important; }","div.sv-responsiveTable--fixedFirst { position: relative; margin-bottom: 20px; overflow: hidden; border-right: 1px solid #ccc; }","div.sv-responsiveTable--fixedFirst table { margin-bottom: 0; overflow: visible; max-width: none; }",
"div.sv-responsiveTable--fixedFirst td, div.sv-responsiveTable--fixedFirst th { position: relative; overflow: hidden; }","div.sv-responsiveTable--fixedFirst__scrollable th:first-child, div.sv-responsiveTable--fixedFirst__scrollable td:first-child { display: none; }","div.sv-responsiveTable--fixedFirst__pinned { position: absolute; left: 0; top: 0; background: #fff; overflow: hidden; overflow-x: scroll; border-right: 1px solid #ccc; border-left: 1px solid #ccc; }","div.sv-responsiveTable--fixedFirst__pinned table { border-right: none; border-left: none; width: 100%; }",
"div.sv-responsiveTable--fixedFirst__pinned td:first-child, div.sv-responsiveTable--fixedFirst__pinned th:first-child { width: 100%; }","div.sv-responsiveTable--fixedFirst__scrollable { overflow: scroll; overflow-y: hidden; }",".sv-responsiveTable--stacked { overflow: visible; }",".sv-responsiveTable--stacked__largeOnly { display: none; }",".sv-responsiveTable--stacked__smallOnly { display: table; }"];f=[".sv-responsiveTable--stacked__largeOnly { display: table; }",".sv-responsiveTable--stacked__smallOnly { display: none; }"];
c.appendCSS=function(){var a=b(),h=b(c.config.breakpoint);d.each(f,function(b,c){a.insertRule(c,b)});d.each(e,function(a,b){h.insertRule(b,a)})}})(window.$svjq,window.sv.responsiveTables);
(function(){var d=window.$svjq,c=window.sv,e=window._sv,f,b=function(a){var b=a.portletId,l=c.ObjectUtil.getHtmlId(b),k=a.inputField,g=a.resultDiv,m=a.portletDiv,q=-1,p=-1,u=function(a,b){var d=c.i18n.getText("portlet.search.searchform2.searchform2","users");return'<div id="'+l+'_sv-user-search-results"" aria-label="'+d+'" class="sv-border-box sv-searchform2-content-container">   <<%= facetTag %> tabindex="0" class="sv-searchform2-content-header <%= facetTagClass %>"><%- name %></<%= facetTag %>>   <div class="sv-border-box sv-searchform2-facet-column'+
a+'" style="width: '+b+'px">      <ul aria-labelledby="'+l+'_sv-user-search-results"" role="listbox" id="'+l+'_user_results" class="sv-defaultlist sv-user-search-list sv-searchform2-search-list sv-searchform2-search-list-column'+a+'">         <% _.each(hits, function(hit, index){ %>            <li aria-selected="false" role="option" id="'+l+'_user_<%= index %>" class="sv-clearfix sv-searchform2-search-hit" >               <img class="sv-buddy-icon sv-searchform2-user-img" src="<%= hit.iconURL %>" />               <% if (hit.isContact) { %><div style="float:right"><i class="halflings-icon ok"></i></div><% } %>               <div class="sv-searchform2-user-container">                  <<%= userBlockTag %> class="sv-searchform2-user-name <%= userTagClass %>"><a href="<%= hit.profileURL %>" onclick="<%= hit.onClick %>"><%= hit.name %></a></<%= userBlockTag %>>                  <% if (typeof(hit.userfields) !== \'undefined\') { %>                     <ul class="sv-searchform2-userfield-list">                        <% _.each(hit.userfields, function(userfield){ %>                           <li class="<%= textTagClass %> sv-wrap-words"><%= userfield.value %></li>                        <% }); %>                     </ul>                  <% } %>               </div>            </li>         <% }); %>         <% if (showDetails) { %>            <li id="'+
l+'_user_more" aria-selected="false" role="option" class="sv-clearfix sv-searchform2-search-hit sv-searchform2-more-hits"><<%= textTag %> class="<%= textTagClass %>"><a href="<%= showDetailsURL %>"><%= showDetailsText %></a></<%= textTag %>></li>         <% } %>      </ul>   </div></div>'},y=function(a,b){var d=c.i18n.getText("portlet.search.searchform2.searchform2","ugc");return'<div id="'+l+'_sv-ugc-search-results"" aria-label="'+d+'" class="sv-border-box sv-searchform2-facet-column'+a+'" style="width: '+
b+'px">   <ul aria-labelledby="'+l+'_sv-ugc-search-results"" role="listbox" id="'+l+'_ugc_results" class="sv-defaultlist sv-user-search-list sv-searchform2-search-list sv-searchform2-search-list-column'+a+'">      <% _.each(hits, function(hit, index){ %>         <li aria-selected="false" role="option" id="'+l+'_ugc_<%= index %>" class="sv-clearfix sv-searchform2-search-hit sv-wrap-words">            <img class="sv-buddy-icon sv-searchform2-user-img" src="<%= hit.iconURL %>" />            <% if (hit.isContact) { %><div style="float:right"><i class="halflings-icon ok"></i></div><% } %>            <div class="sv-searchform2-user-container">               <<%= userBlockTag %> class="sv-searchform2-user-name <%= userTagClass %>"><a href="<%= hit.entryURL %>" onclick="<%= hit.onClick %>"><%= hit.entryText %></a></<%= userBlockTag %>>               <% if (typeof(hit.userfields) !== \'undefined\') { %>                  <ul class="sv-searchform2-userfield-list">                     <% _.each(hit.userfields, function(userfield){ %>                        <li class="<%= textTagClass %> sv-wrap-words"><%= userfield.value %></li>                     <% }); %>                  </ul>               <% } %>            </div>         </li>      <% }); %>      <% if (showDetails) { %>         <li id="'+
l+'_ugc_more" aria-selected="false" role="option" class="sv-clearfix sv-searchform2-search-hit sv-searchform2-more-hits"><<%= textTag %> class="<%= textTagClass %>"><a href="<%= showDetailsURL %>"><%= showDetailsText %></a></<%= textTag %>></li>      <% } %>   </ul></div>'},x=function(a,b){return'<div aria-label="'+c.i18n.getText("portlet.search.searchform2.searchform2","content")+'" id="'+l+'_sv-content-search-results" class="sv-border-box sv-searchform2-facet-column'+a+'" style="width: '+b+'px">   <ul aria-labelledby="'+
l+'_sv-content-search-results" role="listbox" id="'+l+'_content_results" class="sv-defaultlist sv-user-search-list sv-searchform2-search-list sv-searchform2-search-list-column'+a+'">      <% _.each(hits, function(hit, index){ %>         <li aria-selected="false" role="option" id="'+l+'_content_<%= index %>" class="sv-searchform2-search-hit sv-wrap-words"><a class="sv-vamiddle <%= contentTagClass %>" href="<%= hit.URL %>" onclick="<%= hit.onClick %>"><%= hit.name %></a><% if (typeof(hit.iconURL) !== \'undefined\') { %><img alt="<%= hit.iconDescription %>" class="sv-noborder-vamiddle" src="<%= hit.iconURL %>" style="margin-left: 3px;"><% } %></li>      <% }); %>      <% if (showDetails) { %>         <li id="'+
l+'_content_more" aria-selected="false" role="option" class="sv-clearfix sv-searchform2-search-hit sv-searchform2-more-hits" role="option"><<%= textTag %> class="<%= textTagClass %>"><a href="<%= showDetailsURL %>"><%= showDetailsText %></a></<%= textTag %>></li>      <% } %>   </ul></div>'},n=function(){g.hide()};d("body").on("click",n);var r=function(a,b){if(-1<a){var c=b.find(".sv-searchform2-search-list-column"+a);if(1===c.length)return c}},v=function(a,b){if(-1<a&&a<b.children().length)return d(b.children()[a])},
t=function(a){a&&(a.children().removeClass("active").attr("aria-selected",!1),k.attr("aria-activedescendant",""))},z=function(a){a.addClass("active").attr("aria-selected",!0);k.attr("aria-activedescendant",a.attr("id"))};k.on("keydown",function(a){var b=c.KeyUtil.getKeyCodeFromEvent(a);if(b===c.KeyUtil.KEY.RETURN)return a.preventDefault(),!1;a=r(0,g);var d=r(1,g),e=r(2,g);void 0!==a&&void 0!==d&&(b===c.KeyUtil.KEY.RIGHT&&0===p?(p=1,q=-1,t(a),t(e),b=c.KeyUtil.KEY.DOWN):b===c.KeyUtil.KEY.LEFT&&1===
p?(p=0,q=-1,t(d),t(e),b=c.KeyUtil.KEY.DOWN):b===c.KeyUtil.KEY.RIGHT&&1===p?(p=2,q=-1,t(a),t(d),b=c.KeyUtil.KEY.DOWN):b===c.KeyUtil.KEY.LEFT&&2===p&&(p=1,q=-1,t(a),t(e),b=c.KeyUtil.KEY.DOWN));if(b===c.KeyUtil.KEY.DOWN||b===c.KeyUtil.KEY.UP){var f;0===p&&void 0!==a?f=a:1===p&&void 0!==d?f=d:2===p&&void 0!==e?f=e:-1===p&&(e=g.hasClass("sv-searchform2-result-container-alignment-left")?"left":"right","left"===e?void 0!==a&&(p=0,f=a):void 0!==a?(p=0,f=a):void 0!==d&&(p=1,f=d));b===c.KeyUtil.KEY.DOWN&&void 0!==
f&&q+1<f.children().length?(b=v(q+1,f),q++,t(f),z(b)):b===c.KeyUtil.KEY.UP&&void 0!==f&&-1<q&&(q--,t(f),0<=q?(f=v(q,f),z(f)):p=-1);return!1}}).on("keyup",function(a){a=c.KeyUtil.getKeyCodeFromEvent(a);if(a===c.KeyUtil.KEY.ESC)n();else if(a===c.KeyUtil.KEY.RETURN){a=q;var b=r(p,g);a=void 0!==b?v(a,b):void 0;if(void 0!==a)location.href=a.find("a").attr("href");else{a=0;var b=r(0,g),d=r(1,g),e=r(2,g);void 0!==b&&a++;void 0!==d&&a++;void 0!==e&&a++;1===a&&(a=r(0,g).find(".sv-searchform2-more-hits"),1===
a.length&&(location.href=a.find("a").attr("href")))}}return!1}).on("input",function(){void 0!==f&&clearTimeout(f);f=setTimeout(function(){var a=k.val();p=q=-1;if(""===a||2>a.length)g.css("display","none");else{var f=c.PortletUtil.getPortletResourceUri(b,"query");d.ajax({url:f,data:{term:a}}).fail(function(a){g.html('<div class="sv-searchform2-message">'+c.i18n.getText("portlet.search.searchform2.searchform2","searchFailed",a.status)+"</div>")}).done(function(b){for(var f=0,h=0;h<b.facets.length;h++)f+=
b.facets[h].hits.length;if(a===b.term){h=b.facets;g.empty();g.css("width","auto");m.find(".sv-search-results-count").text(f+" "+c.i18n.getText("portlet.search.searchform2.searchform2","results"));if(0===h.length)h=e.template('<div class="sv-searchform2-message">   <<%= noHitsTag %> class="<%= noHitsClass %>"><%= noHitsText %></<%= noHitsTag %>></div>'),g.append(d(h(b)));else{var l=document.documentElement.clientWidth,f=b.width/2,n=b.contentColumns,r=f*h.length,v=!1,B=!1,C="";r>l&&(300<l?(f=l/2,r=
f*h.length):r=f>l?f=l:f);for(l=0;l<h.length;l++){var A=h[l],w;"content"===A.type?(v=!0,w=x(l,f)):"ugc"===A.type?(v=!0,w=y(l,f)):"users"===A.type?(w=u(l,f),v=!1):(w="",c.Log.error("Skipping unsupported facet type "+A.type));g.css("width",r);v?(B||(w='<div class="sv-border-box sv-searchform2-content-container" style="width: '+f*n+'px">   <<%= facetTag %> tabindex="0" class="sv-searchform2-content-header <%= facetTagClass %>"><%- name %></<%= facetTag %>>'+w),B=!0):B&&(w="</div>"+w);w=e.template(w);
C+=w(A)}g.append(d(C));var E=g.find("ul.sv-user-search-list");E.find("li.sv-searchform2-search-hit").on("mouseenter",function(){var a=d(this),b=a.parent();p=b.hasClass("sv-searchform2-search-list-column0")?0:b.hasClass("sv-searchform2-search-list-column1")?1:b.hasClass("sv-searchform2-search-list-column2")?2:-1;q=a.index();t(E);z(a)}).on("mouseleave",function(){q=p=-1;d(this).removeClass("active").attr("aria-selected",!1);k.attr("aria-activedescendant","")}).on("click",function(a){d(a.target).is("a")||
(a=d(this),location.href=a.find("a").attr("href"))})}h=b.facetAlignment+" top";b=b.facetAlignment+" bottom";k.attr("aria-activedescendant","");g.attr("aria-expanded",!0);g.show();g.position({my:h,at:b,of:k,offset:"0 1",collision:"none"})}})}},200);return!1})};d(".sv-searchform2-portlet").each(function(){var a=d(this),e=c.ObjectUtil.getObjectId(a.attr("id")),f=a.find(".sv-searchform2-result-container"),k=a.find(".sv-searchform2-input");k.attr("autocomplete","off");b({portletId:e,inputField:k,resultDiv:f,
portletDiv:a})})})();
(function(){if(window.SVBackbone){var d=window.$svjq,c=window.sv,e=c.ObjectUtil,f=c.PortletUtil,b=window.SVBackbone,c=b.Model.extend({getViewUrl:function(){return this.get("url")},isFolder:function(){return this.get("isFolder")}}),a=b.Collection.extend({model:c,initialize:function(a,b){this.portletId=b.portletId;this.currentFolderProps=b.currentFolderProps},url:function(){return f.getPortletResourceUri(this.portletId,"files")},setCurrentFolderProps:function(a){this.currentFolderProps=a},getCurrentFolderProps:function(){return this.currentFolderProps},
parse:function(a){this.setCurrentFolderProps(a.currentFolderProps);return a.items}}),h=b.View.extend({tagName:"tr",events:{"click [data-fetch-item]":"fetchItem"},initialize:function(){this.template=this.options.template;this.model.set("fontClass",this.model.isFolder()?this.options.folderFontClass:this.options.fileFontClass);this.portletView=this.options.portletView},render:function(){this.$el.html(this.template(this.model.toJSON(),this.model));return this},fetchItem:function(a){this.model.isFolder()&&
(a.preventDefault(),this.portletView.fetchFolder(this.model))}}),l=b.View.extend({initialize:function(){this.itemTemplate=this.options.itemTemplate;this.fileFontClass=this.options.fileFontClass;this.folderFontClass=this.options.folderFontClass;this.portletView=null},render:function(){this.clearTable();this.collection.each(function(a){this.appendOne(a)},this)},appendOne:function(a){a=new h({model:a,template:this.itemTemplate,portletView:this.portletView,fileFontClass:this.fileFontClass,folderFontClass:this.folderFontClass});
this.$el.append(a.render().el)},clearTable:function(){this.$el.empty()}}),k=c.extend({isFolder:function(){return!0}}),g=b.View.extend({tagName:"li",className:"env-breadcrumb__item",events:{"click [data-fetch-folder]":"fetchFolder"},initialize:function(){this.template=this.options.template;this.portletView=this.options.portletView;this.model.set("isActive",this.options.isActive)},render:function(){this.$el.html(this.template(this.model.toJSON(),this.model));return this},fetchFolder:function(a){a.preventDefault();
this.portletView.fetchFolder(this.model)}}),m=b.View.extend({initialize:function(){this.breadcrumbTemplate=this.options.breadcrumbTemplate;this.portletView=null},render:function(){this.clearList();this.collection.each(function(a,b){this.appendOne(a,b===this.collection.length-1)},this)},appendOne:function(a,b){var c=new g({model:a,template:this.breadcrumbTemplate,portletView:this.portletView,isActive:b});this.$el.append(c.render().el)},clearList:function(){this.$el.empty()}}),q=b.View.extend({initialize:function(){this.breadcrumbCollectionView=
this.options.breadcrumbCollectionView;this.breadcrumbCollection=this.breadcrumbCollectionView.collection;this.itemCollectionView=this.options.itemCollectionView;this.itemCollection=this.itemCollectionView.collection;this.breadcrumbCollectionView.portletView=this;this.itemCollectionView.portletView=this},render:function(){this.breadcrumbCollectionView.render();this.itemCollectionView.render()},fetchFolder:function(a){var b=this.itemCollection.getCurrentFolderProps();this.itemCollection.fetch({data:{sharePointFolderId:a.id,
trail:b.trail,trailTime:b.trailTime},context:this}).done(function(b){b.unauthorized?window.location.href=a.getViewUrl():(this.breadcrumbCollection.reset(b.breadcrumbs),this.render())})}});d(".sv-sharepointfile-portlet").each(function(){var c=d(this),g=e.getObjectId(c.attr("id")),h=c.find(".sv-sharepointfile-root"),x=h.data("js-namespace"),n=window.sv[x]||[];if(0!==n.length){var r=h.find(".sv-sharepointfile-breadcrumbs"),h=h.find(".sv-sharepointfile-files tbody"),x=h.data("file-font-class"),v=h.data("folder-font-class"),
t=n.items,z=n.currentFolderProps,s=n.breadcrumbs,n=f.getTemplate(c,"sharepointitem"),c=f.getTemplate(c,"sharepointbreadcrumb"),s=new b.Collection(s,{model:k}),r=new m({el:r,collection:s,breadcrumbTemplate:c}),g=new a(t,{portletId:g,currentFolderProps:z}),g=new l({el:h,collection:g,breadcrumbCollectionView:r,fileFontClass:x,folderFontClass:v,itemTemplate:n});(new q({breadcrumbCollectionView:r,itemCollectionView:g})).render()}})}})();
(function(){var d=window.$svjq,c=window.sv;d(".sv-sharepointfile-portlet, .sv-sharepointsearchfilelist-portlet").each(function(){var e=d(this),f=e.find(".sv-sharepoint-login-modal");f.svDialog({title:c.i18n.getText("portlet.sharepoint.sharepointfile","connectToSharePoint"),open:!1,modal:!0,buttons:[{text:c.i18n.getText("portlet.sharepoint.sharepointfile","loginButton"),type:"primary",callback:function(b){b.preventDefault();f.find("form").trigger("submit")}},{text:c.i18n.getText("common","cancel"),
type:"link",callback:function(){f.svDialog("close")}}]});e.find(".sv-sharepoint-modal-button").on("click",function(){f.svDialog("open")})})})();
(function(){function d(){k&&0!==k.length||(k=a("<div/>"));return k}function c(b){b.preventDefault();b=d().find("form");a.post(b.attr("action"),b.serialize(),function(b){e();-1!==b.indexOf('http-equiv="Refresh"')?window.location.href=a("input[name=redirectURL]").attr("value"):0<a(b).find("div#error-messages").length?k=a("<div/>").html(b).svDialog({open:!0,title:a("input[name=windowTitle]").attr("value"),buttons:[{text:a("input[name=buttonText]").attr("value"),type:"primary",callback:c},{text:a("input[name=closeButtonText]").attr("value"),
type:"link",callback:e}]}):(k=d(),g?g.html(b).svDialog("open"):g=a("<div/>").html(b).svDialog({open:!0,title:a("input[name=windowTitle]").attr("value"),buttons:[{text:a("input[name=closeButtonText]").attr("value"),type:"primary",callback:f}]}))})}function e(){k.svDialog("remove")}function f(){g.svDialog("close")}function b(b){b=a("#"+b);k=d();b.on("click",function(b){b.preventDefault();k.svDialog({open:!0,url:this.href,title:a("input[name=windowTitle]").attr("value"),modal:!0,buttons:[{text:a("input[name=buttonText]").attr("value"),
type:"primary",callback:c},{text:a("input[name=closeButtonText]").attr("value"),type:"link",callback:e}]})})}var a=window.$svjq,h=window.sv,l,k,g;if(h.tellfriend2&&h.tellfriend2.length)for(l=0;l<h.tellfriend2.length;l+=1)b(h.tellfriend2[l])})();
(function(d,c){var e=c(".sv-text-portlet .sv-tablesorter");if(e.length){var f=window.LazyLoad,b=window.sv.PageContext.dev?".js":"-min.js";d.sv=d.sv||{};d.sv.sortableTables=d.sv.sortableTables||{};d.sv.sortableTables.dateFormat=d.sv.sortableTables.dateFormat||"ddmmyyyy";f.js("/sitevision/ajax/jquery/plugins/tablesorter/jquery.sitevision.tablesorter"+b,function(){e.tablesorter({dateFormat:d.sv.sortableTables.dateFormat})});f.css("/sitevision/ajax/jquery/plugins/tablesorter/sitevision-tablesorter-style.css")}})(window,
window.$svjq);
